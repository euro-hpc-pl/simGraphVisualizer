<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: edge.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: edge.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* 
 * Copyright 2022 Dariusz Pojda.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";
/* global BABYLON, sgv */

/**
 * @class
 * @classdesc Edge class representing an edge in a graph.
 * @memberOf sgv.Graph
 * 
 * @constructor
 * @param {object} graf - The parent graph object.
 * @param {number|string} b - The identifier of the beginning node of the edge.
 * @param {number|string} e - The identifier of the ending node of the edge.
 */
var Edge = /** @class */ (function (graf, b, e) {
    this.parentGraph = graf;

    this.values = {
        'default' : Number.NaN
    };

    if (typeof b==='string') b = parseInt(b,10); 
    if (typeof e==='string') e = parseInt(e,10); 

    if ((typeof b !== 'number')||(typeof e !== 'number'))
        console.warning("Edge begin and end ids should be both a numbers, but are: "+b+" and "+e);

    if (!(b in this.parentGraph.nodes))
        console.warning("First node not exists in graph: "+b);

    if (!(e in this.parentGraph.nodes))
        console.warning("Second node not exists in graph: "+e);

    if (b &lt; e) {
        this.begin = b;
        this.end = e;
    } else {
        this.begin = e;
        this.end = b;
    }

    this.id = Edge.calcId(this.begin, this.end);

    this._checked = false;

    /**
     * Retrieves the identifier of the mesh associated with the edge.
     * @returns {number} The mesh identifier.
     */
    this.meshId = ()=>mesh.idx;
    
    /**
     * Clears the edge by unbinding it from the scene particle system.
     */
    this.clear = function() {
        sgv.SPS.unbindEdge(this);
    };

    /**
     * Toggles the check flag of the edge.
     */
    this.switchCheckFlag = function () {
        this._checked = !this._checked;

        this.parentGraph.checkNode(this.begin, this._checked);
        this.parentGraph.checkNode(this.end, this._checked);

        //this.instance.material = this._checked ? sgv.grayMat1 : sgv.grayMat0;
    };

    /**
     * Deletes the value associated with a scope for the edge.
     * @param {string} [scope] - The scope for which to delete the value. If not provided, the current scope is used.
     */
    this.delValue = function(scope) {
        if (typeof scope === 'undefined') {
            scope = this.parentGraph.currentScope;
        }
        
        if (scope in this.values) {
            delete this.values[scope];
        }
    };

    /**
     * Retrieves the value associated with a scope for the edge.
     * @param {string} [scope] - The scope for which to retrieve the value. If not provided, the current scope is used.
     * @returns {number} The value associated with the scope.
     */
    this.getValue = function (scope) {
        if (typeof scope === 'undefined') {
            scope = this.parentGraph.currentScope;
        }
        
        if (this.values.hasOwnProperty(scope)){
            return this.values[scope];
        } else {
            return Number.NaN;
        }
    };

    /**
     * Sets the value associated with a scope for the edge.
     * @param {number} val - The value to set.
     * @param {string} [valId='default'] - The value identifier. Defaults to 'default'.
     */
    this.setValue = function (val, valId) {
        if (typeof valId === 'undefined') {
            valId = 'default';
        }
        
        //console.log(valId, val);

        this.values[valId] = val;

        this.displayValue(valId);
    };

    /**
     * Displays the value associated with a value identifier for the edge.
     * @param {string} [valId='default'] - The value identifier. Defaults to 'default'.
     */
    this.displayValue = function (valId) {
        if (typeof valId === 'undefined') {
            valId = 'default';
        }

        let edgeColor = new BABYLON.Color3(0.2, 0.2, 0.2);
        let edgeWidth = 0.1;
        if (valId in this.values) {
            edgeColor = valueToColor(this.values[valId]);
            edgeWidth = valueToEdgeWidth(this.values[valId]);
        }

        sgv.SPS.updateEdgeValue(this, edgeColor, edgeWidth);
    };

    /**
     * Updates the edge by setting its color, width, and position based on the current value.
     */
    this.update = ()=>{
        let val = this.values[this.parentGraph.currentScope];
        
        let edgeColor = valueToColor(val);
        let edgeWidth = valueToEdgeWidth(val);

        let b = this.parentGraph.nodePosition(this.begin);
        let e = this.parentGraph.nodePosition(this.end);

        sgv.SPS.setEdge(this, edgeColor, edgeWidth, b, e);
    };

    var mesh = sgv.SPS.bindEdge(this);
    if (mesh===null) {
        console.error("Can't bind EdgeSPS");
    }
    else {
        this.update();
    }

});

// Static method

/**
 * Calculates the identifier for an edge based on the beginning and ending node identifiers.
 * @param {number|string} b - The identifier of the beginning node of the edge.
 * @param {number|string} e - The identifier of the ending node of the edge.
 * @returns {string} The calculated identifier.
 */
Edge.calcId = (b, e) => {
    if (typeof b==='string') b = parseInt(b,10); 
    if (typeof e==='string') e = parseInt(e,10); 

    if ((typeof b !== 'number')||(typeof e !== 'number')) {
        console.error("Edge begin and end must be a numbers");
    }
    
    return (b &lt; e)?("" + b + "," + e):("" + e + "," + b);
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Cookie.html">Cookie</a></li><li><a href="Dispatcher.html">Dispatcher</a></li><li><a href="FileIO.html">FileIO</a></li><li><a href="ParserGEXF.html">ParserGEXF</a></li><li><a href="ParserTXT.html">ParserTXT</a></li><li><a href="SVG.html">SVG</a></li><li><a href="Settings.html">Settings</a></li><li><a href="UI.html">UI</a></li><li><a href="sgv.html">sgv</a></li></ul><h3>Classes</h3><ul><li><a href="GraphDescr.html">GraphDescr</a></li><li><a href="GraphSize.html">GraphSize</a></li><li><a href="QbDescr.html">QbDescr</a></li><li><a href="TempGraphStructure.html">TempGraphStructure</a></li><li><a href="sgv.Chimera.html">Chimera</a></li><li><a href="sgv.DlgAbout.html">DlgAbout</a></li><li><a href="sgv.DlgAlternateFileSave.html">DlgAlternateFileSave</a></li><li><a href="sgv.DlgCPL.html">DlgCPL</a></li><li><a href="sgv.DlgCPL.SlidersPanel.html">SlidersPanel</a></li><li><a href="sgv.DlgCellView.html">DlgCellView</a></li><li><a href="sgv.DlgConsole.html">DlgConsole</a></li><li><a href="sgv.DlgCreateGraph.html">DlgCreateGraph</a></li><li><a href="sgv.DlgEdgeProperties.html">DlgEdgeProperties</a></li><li><a href="sgv.DlgEditSettings.html">DlgEditSettings</a></li><li><a href="sgv.DlgEditSettings.SingleFilePanel.html">SingleFilePanel</a></li><li><a href="sgv.DlgLoaderSplash.html">DlgLoaderSplash</a></li><li><a href="sgv.DlgMissingNodes.html">DlgMissingNodes</a></li><li><a href="sgv.DlgNodeProperties.html">DlgNodeProperties</a></li><li><a href="sgv.DlgNodeProperties.ValuePanel.html">ValuePanel</a></li><li><a href="sgv.GenericWindow.html">GenericWindow</a></li><li><a href="sgv.Graph.html">Graph</a></li><li><a href="sgv.Graph.Edge.html">Edge</a></li><li><a href="sgv.Graph.Node.html">Node</a></li><li><a href="sgv.Label.html">Label</a></li><li><a href="sgv.Pegasus.html">Pegasus</a></li><li><a href="sgv.ScopePanel.html">ScopePanel</a></li><li><a href="sgv.SolidPS.html">SolidPS</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DEMO_MODE">DEMO_MODE</a></li><li><a href="global.html#createLabel">createLabel</a></li><li><a href="global.html#desktopInit">desktopInit</a></li><li><a href="global.html#detectClient">detectClient</a></li><li><a href="global.html#enableMenu">enableMenu</a></li><li><a href="global.html#getRandom">getRandom</a></li><li><a href="global.html#hideSplash">hideSplash</a></li><li><a href="global.html#qD">qD</a></li><li><a href="global.html#showSplash">showSplash</a></li><li><a href="global.html#showSplashAndRun">showSplashAndRun</a></li><li><a href="global.html#valueToColor">valueToColor</a></li><li><a href="global.html#valueToColorBAK">valueToColorBAK</a></li><li><a href="global.html#valueToEdgeWidth">valueToEdgeWidth</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Jul 19 2023 12:40:30 GMT+0200 (czas Å›rodkowoeuropejski letni)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
