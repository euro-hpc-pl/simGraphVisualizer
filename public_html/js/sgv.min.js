function valueToColor(e){if(null==e||isNaN(e))return new BABYLON.Color3(.2,.2,.2);var t,n,s=sgv.graf.greenLimit,i=sgv.graf.redLimit;return s=0<e?(t=0,1-(n=e<s?e/s:1)):e<0?(n=0,1-(t=i<e?e/i:1)):(n=t=0,1),new BABYLON.Color3(t,n,s)}function valueToEdgeWidth(e){if(null==e||isNaN(e))return.1;let t=Math.abs(sgv.graf.greenLimit);var n=Math.abs(sgv.graf.redLimit);return t=t>n?t:n,(e=Math.abs(e))>t?.6:.1+e/(2*t)}var Def2=(e,t)=>{this.n1=e,this.n2=t,this.values={default:NaN},this.label={text:null,enabled:!1}},Label=function(e,t,n,s){this.setText=async function(e,t){this.text=e,null!==this.plane&&this.plane.dispose(),this.plane=this.createPlane(),this.plane.position=this.position.add(new BABYLON.Vector3(0,5,0)),this.plane.billboardMode=BABYLON.AbstractMesh.BILLBOARDMODE_ALL,this.plane.setEnabled(t),this.plane.isPickable=!1},this.getText=function(){return this.text},this.setPosition=function(e){this.position=e,null!==this.plane&&(this.plane.position=e.add(new BABYLON.Vector3(0,5,0)))},this.createPlane=function(){var e="normal 48px Arial",t=new BABYLON.DynamicTexture("DynamicTexture",64,sgv.scene).getContext(),n=(t.font=e,this.text),t=t.measureText(n).width+8,s=t*(4/72),i=new BABYLON.StandardMaterial("mat",sgv.scene),t=(i.diffuseTexture=new BABYLON.DynamicTexture("DynamicTexture",{width:t,height:72},sgv.scene,!1),i.diffuseTexture.drawText(n,null,null,e,"#000000","#ffff00",!0),BABYLON.MeshBuilder.CreatePlane(this.id+"_plane",{width:s,height:4,updatable:!0},sgv.scene));return t.material=i,t},this.createMe=async function(e,t,n){this.plane=this.createPlane(),this.plane.position=t.add(new BABYLON.Vector3(0,5,0)),this.plane.billboardMode=BABYLON.AbstractMesh.BILLBOARDMODE_ALL,this.plane.setEnabled(n),this.plane.isPickable=!1},this.setEnabled=function(e){null!==this.plane&&this.plane.setEnabled(e)},this.text=t,this.position=n,this.id=e,this.plane=null,this.createMe(t,n,s)},Label2=function(e,t,n){this.id=e;var t=t.length,s=26*t/15;const i=new BABYLON.StandardMaterial("mat");i.diffuseTexture=new BABYLON.Texture("cyferki.png"),i.diffuseTexture.uScale=t/11,i.diffuseTexture.vScale=1,i.diffuseTexture.uOffset=1/11,i.diffuseTexture.vOffset=0,this.plane=BABYLON.MeshBuilder.CreatePlane(e+"_plane",{width:s,height:3.2,updatable:!0},sgv.scene),this.plane.material=i,this.plane.position=n.add(new BABYLON.Vector3(0,5,0)),this.plane.billboardMode=BABYLON.AbstractMesh.BILLBOARDMODE_ALL,this.plane.setEnabled(!1),this.plane.isPickable=!1,this.setEnabled=function(e){this.plane.setEnabled(e)}};const createLabel=function(e,t,n,s){return new Label("q"+e,"q"+e,t,n,s)};var Node=function(e,t,n,s,i,a){var o="node:"+t,l=(this.parentGraph=e,this.id=t,this.active=!0,this._chckedEdges=0,this.labelIsVisible=!1,sgv.defaultSphere.clone(t));l.material=sgv.defaultSphere.material.clone(),l.position=new BABYLON.Vector3(n,s,i),l.name=o,l.setEnabled(!0),this.values={default:null};for(const d in a)this.values[d]=a[d];var r=createLabel(this.id,l.position,sgv.scene,this.labelIsVisible);Object.defineProperty(this,"position",{get(){return l.position},set(e){l.position.copyFrom(e),void 0!==r&&r.plane.position.copyFrom(e).addInPlaceFromFloats(0,5,0)}}),this.dispose=function(){l.dispose(),delete l,null!==r.plane&&r.plane.dispose(),delete this.label},this.clear=function(){this.dispose()},this.showLabel=function(e){void 0!==e&&(this.labelIsVisible=e),r.setEnabled(this.labelIsVisible&&this.parentGraph.labelsVisible)},this.setLabel=function(e,t){void 0!==t&&(this.labelIsVisible=t),r.setText(e,this.labelIsVisible&&this.parentGraph.labelsVisible)},this.isLabelVisible=function(){return this.labelIsVisible},this.getLabel=function(){return r.getText()},this.move=function(e){l.position.addInPlace(e)},this.addCheck=function(){this._chckedEdges++,l.material=sgv.grayMat1},this.delCheck=function(){this._chckedEdges--,0===this._chckedEdges&&(l.material=sgv.grayMat0)},this.getValue=function(e){return void 0===e&&(e=this.parentGraph.currentScope),this.values.hasOwnProperty(e)?this.values[e]:Number.NaN},this.exportGEXF=function(){let e='      <node id="'+this.id+'">\n';e+="        <attvalues>\n";for(const t in this.values)e+='          <attvalue for="'+this.parentGraph.getScopeIndex(t)+'" value="'+this.values[t]+'"/>\n';return e=e+"        </attvalues>\n"+"      </node>\n"},this.delValue=function(e){(e=void 0===e?this.parentGraph.currentScope:e)in this.values&&delete this.values[e]},this.setValue=function(e,t){void 0===t&&(t=this.parentGraph.currentScope),this.values[t]=e},this.displayValue=function(e){(e=void 0===e?this.parentGraph.currentScope:e)in this.values?l.material.emissiveColor=valueToColor(this.values[e]):l.material.emissiveColor=new BABYLON.Color4(.2,.2,.2)},this.displayValue()},Edge=function(e,t,n,s){this.parentGraph=e,this.values={},this.begin=t,this.end=n,this._checked=!1,this.update=function(){var e={instance:this.instance,path:[this.parentGraph.nodePosition(this.begin),this.parentGraph.nodePosition(this.end)]},t="edge:"+this.begin+","+this.end;this.instance=BABYLON.MeshBuilder.CreateTube(t,e,sgv.scene)},this.switchCheckFlag=function(){this._checked=!this._checked,this.parentGraph.checkNode(this.begin,this._checked),this.parentGraph.checkNode(this.end,this._checked),this.instance.material=this._checked?sgv.grayMat1:sgv.grayMat0},this.delValue=function(e){(e=void 0===e?this.parentGraph.currentScope:e)in this.values&&delete this.values[e]},this.getValue=function(e){return void 0===e&&(e=this.parentGraph.currentScope),this.values.hasOwnProperty(e)?this.values[e]:Number.NaN},this.setValue=function(e,t){this.values[t=void 0===t?"default":t]=e,this.displayValue(t)},this.exportGEXF=function(e){let t='      <edge id="'+e+'" source="'+this.begin+'" target="'+this.end+'">\n';t+="        <attvalues>\n";for(const n in this.values)t+='          <attvalue for="'+this.parentGraph.getScopeIndex(n)+'" value="'+this.values[n]+'"/>\n';return t=t+"        </attvalues>\n"+"      </edge>\n"},this.displayValue=function(e){void 0===e&&(e="default");let t=new BABYLON.Color3(.2,.2,.2),n=.1;e in this.values&&(t=valueToColor(this.values[e]),n=valueToEdgeWidth(this.values[e]));var e={instance:this.instance,path:[this.parentGraph.nodePosition(this.begin),this.parentGraph.nodePosition(this.end)],radius:n},s="edge:"+this.begin+","+this.end;this.instance=BABYLON.MeshBuilder.CreateTube(s,e,sgv.scene),this.instance.material.emissiveColor=t},this.createInstance=function(e){let t=new BABYLON.Color3(.2,.2,.2),n=.1;void 0===e?this.values.default=Number.NaN:(this.values.default=e,t=valueToColor(e),n=valueToEdgeWidth(e));var e={path:[this.parentGraph.nodePosition(this.begin),this.parentGraph.nodePosition(this.end)],radius:n,updatable:!0},s="edge:"+this.begin+","+this.end,s=(this.instance=BABYLON.MeshBuilder.CreateTube(s,e,sgv.scene),new BABYLON.StandardMaterial("mat",sgv.scene));s.diffuseColor=t,s.specularColor=new BABYLON.Color3(0,0,0),s.emissiveColor=new BABYLON.Color3(0,0,0),this.instance.material=s},this.createInstance(this.values.default)};const qD=function(e,t,n,s,i,a){return new QbDescr(e,t,n,s,i,a)},QbDescr=function(e,t,n,s,i,a){this.x=e,this.y=t,this.z=n,this.i=s,this.j=i,this.k=a,this.n0=function(){return((this.i<<1)+this.j<<1)+this.k},this.n1=function(){return((this.i<<1)+this.j<<1)+this.k+1},this.toNodeId=function(e,t){return 8*(this.x+(this.y+this.z*e)*t)+this.n1()}};QbDescr.fromNodeId=function(e,t,n){var e=e-1,s=e%8,i=s%2,a=(s>>1)%2,s=(s>>2)%2,e=e>>3,t=n*t,o=Math.floor(e/t),e=e%t,t=Math.floor(e/n),e=e%n;return new QbDescr(e,t,o,s,a,i)};var Graph=function(){this.nodes={},this.edges={},this.missing={},this.type="generic",this.scopeOfValues=["default"],this.currentScope="default",this.greenLimit=1,this.redLimit=-1,this.labelsVisible=!0,this.dispose=function(){for(const e in this.edges)this.edges[e].instance.dispose(),delete this.edges[e];for(const t in this.nodes)this.nodes[t].clear(),delete this.nodes[t]},this.clear=function(){this.dispose()},this.maxNodeId=function(){return Object.keys(this.nodes).length},this.addNode=function(e,t,n){void 0!==n&&(values={default:n}),this.nodes[e]=new Node(this,e,t.x,t.y,t.z,values)},this.getKeyByValue=function(t,n){return Object.keys(t).find(e=>t[e]===n)},this.getScopeIndex=function(t){return Object.keys(this.scopeOfValues).find(e=>this.scopeOfValues[e]===t)},this.exportTXT=function(){var e="# type="+this.type+"\n";e+="# size="+this.cols+","+this.rows+","+this.layers+","+this.KL+","+this.KR+"\n";for(const t in this.nodes)e=(e+=t+" "+t+" ")+this.nodes[t].getValue()+"\n";for(const n in this.edges)e=(e+=this.edges[n].begin+" "+this.edges[n].end+" ")+this.edges[n].getValue()+"\n";return e},this.exportGEXF=function(){var t='<?xml version="1.0" encoding="UTF-8"?>\n',t=(t=(t=(t+='<gexf xmlns="http://gexf.net/1.2" version="1.2">\n')+"  <meta>\n"+"    <creator>IITiS.pl</creator>\n")+"    <description>SimGraphVisualizer GEXF export</description>\n"+"  </meta>\n")+'  <graph defaultedgetype="undirected">\n'+'    <attributes class="node">\n';for(const s in this.scopeOfValues){let e=this.scopeOfValues[s];"default"===e&&(e+=";"+this.type+";"+this.cols+","+this.rows+","+this.layers+","+this.KL+","+this.KR),t+='      <attribute id="'+s+'" title="'+e+'" type="float"/>\n'}t+="    </attributes>\n    <nodes>\n";for(const i in this.nodes)t+=this.nodes[i].exportGEXF();t+='    </nodes>\n    <attributes class="edge">\n';for(const a in this.scopeOfValues){var e=this.scopeOfValues[a];t+='      <attribute id="'+a+'" title="'+e+'" type="float"/>\n'}t+="    </attributes>\n    <edges>\n";let n=0;for(const o in this.edges)t+=this.edges[o].exportGEXF(++n);return t=(t+="    </edges>\n")+"  </graph>\n"+"</gexf>\n"},this.addEdge=function(e,t,n){e<t?this.edges[e+","+t]=new Edge(this,e,t):this.edges[t+","+e]=new Edge(this,t,e)},this.delEdge=function(e){this.edges[e].instance.dispose(),delete this.edges[e]},this.findAndDeleteEdges=function(e){var t={};console.log("graf.findAndDeleteEdges",e);for(const n in this.edges)this.edges[n].begin.toString()===e?(t[this.edges[n].end]={values:this.edges[n].values},this.delEdge(n)):this.edges[n].end.toString()===e&&(t[this.edges[n].begin]={values:this.edges[n].values},this.delEdge(n));return t},this.delNode=function(e){var t=this.findAndDeleteEdges(e);this.missing[e]={label:{text:this.nodes[e].getLabel(),enabled:this.nodes[e].isLabelVisible()},values:this.nodes[e].values,edges:{}};for(const n in t)this.missing[e].edges[n]=t[n];this.nodes[e].clear(),delete this.nodes[e],sgv.dlgMissingNodes.addNode(e)},this.restoreNode=function(e){var t=this.calcPosition(e);this.nodes[e]=new Node(this,e,t.x,t.y,t.z,this.missing[e].values),this.nodes[e].setLabel(this.missing[e].label.text,this.missing[e].label.enabled);for(const i in this.missing[e].edges){var n,s=parseInt(i,10);if(s in this.nodes){console.log("key: ",s,typeof s),e<i?(n=e+","+i,this.edges[n]=new Edge(this,e,i)):(n=i+","+e,this.edges[n]=new Edge(this,i,e));for(const a in this.missing[e].edges[s].values)this.edges[n].setValue(this.missing[e].edges[s].values[a],a)}else s in this.missing&&(this.missing[s].edges[e]=this.missing[e].edges[s])}delete this.missing[e],0===Object.keys(this.missing).length&&sgv.dlgMissingNodes.hide()},this.findAndUpdateEdges=function(e){for(const t in this.edges)this.edges[t].begin.toString()!==e&&this.edges[t].end.toString()!==e||this.edges[t].update()},this.stringToStruct=e=>{if(null==e)return null;for(var t,n,s={nodes:{},edges:{}},i=e.split("\n");0<i.length;)"#"!==i[0][0]&&null!==(t=function(e){e=e.split(" ");return 3===e.length?{n1:parseInt(e[0],10),n2:parseInt(e[1],10),val:parseFloat(e[2],10)}:null}(i[0]))&&(t.n1===t.n2?s.nodes[t.n1]=t.val:(n=t.n1<t.n2?t.n1+","+t.n2:t.n2+","+t.n1,s.edges[n]=t.val)),i.shift();return s},this.loadScopeValues=(e,t)=>{let n=!1;void 0===e||this.scopeOfValues.includes(e)||(this.scopeOfValues.push(e),n=!0);var s=this.stringToStruct(t);for(const i in s.nodes)this.nodes[i].setValue(s.nodes[i],e);for(const a in s.edges)this.edges[a].setValue(s.edges[a],e);return this.displayValues(e),{n:n,i:this.scopeOfValues.indexOf(e)}},this.addScopeOfValues=function(e){return void 0===e||this.scopeOfValues.includes(e)?-1:(this.scopeOfValues.push(e),this.scopeOfValues.indexOf(e))},this.delScopeOfValues=function(e){if(void 0!==e&&"default"!==e){var t=this.scopeOfValues.indexOf(e);if(-1!==t){this.scopeOfValues.splice(t,1);for(const n in this.nodes)this.nodes[n].delValue(e);return this.currentScope===e&&(this.currentScope="default",this.displayValues("default")),this.scopeOfValues.indexOf(this.currentScope)}}return-1},this.hasScope=function(e){return void 0!==e&&this.scopeOfValues.includes(e)},this.displayValues=function(e){if(void 0===e||!this.scopeOfValues.includes(e))return!1;this.currentScope=e;for(const t in this.nodes)this.nodes[t].displayValue(e);for(const n in this.edges)this.edges[n].displayValue(e);return!0},this.nodePosition=function(e){return this.nodes[e].position},this.checkNode=function(e,t){t?this.nodes[e].addCheck():this.nodes[e].delCheck()},this.edgeDoubleClicked=function(e){this.edges[e].switchCheckFlag()},this.moveNode=function(e,t){this.nodes[e].move(t),this.findAndUpdateEdges(e)},this.setEdgeValue=function(e,t,n){this.edges[e].setValue(t,n),this.edges[e].displayValue()},this.delEdgeValue=function(e,t){this.edges[e].delValue(t),this.edges[e].displayValue()},this.edgeValue=function(e,t){return this.edges[e].getValue(t)},this.setNodeValue=function(e,t,n){this.nodes[e].setValue(t,n),this.nodes[e].displayValue()},this.delNodeValue=function(e,t){this.nodes[e].delValue(t),this.nodes[e].displayValue()},this.nodeValue=function(e,t){return this.nodes[e].getValue(t)},this.getMinMaxEdgeVal=function(e){void 0!==e&&this.scopeOfValues.includes(e)||(e=this.currentScope);var t={min:Number.MAX_VALUE,max:Number.MIN_VALUE,com:""};let n=!0;for(const i in this.edges){var s=this.edges[i].getValue(e);s<t.min&&(n=!1,t.min=s),s>t.max&&(n=!1,t.max=s)}return n&&(t.min=Number.NaN,t.max=Number.NaN,t.com="\nWARNING: The graph has no edge that has a weight in the current scope.\n"),t},this.getMinMaxNodeVal=function(e){void 0!==e&&this.scopeOfValues.includes(e)||(e=this.currentScope);var t={min:Number.MAX_VALUE,max:Number.MIN_VALUE,com:""};let n=!0;for(const i in this.nodes){var s=this.nodes[i].getValue(e);s<t.min&&(n=!1,t.min=s),s>t.max&&(n=!1,t.max=s)}return n&&(t.min=Number.NaN,t.max=Number.NaN,t.com="\nWARNING: The graph has no node that has a value in the current scope.\n"),t},this.getMinMaxVal=function(){var e={min:99999.9,max:-99999.9};for(const t in this.edges)this.edges[t].value<e.min&&(e.min=this.edges[t].value),this.edges[t].value>e.max&&(e.max=this.edges[t].value);for(const n in this.nodes)this.nodes[n].value<e.min&&(e.min=this.nodes[n].value),this.nodes[n].value>e.max&&(e.max=this.nodes[n].value);return e},this.calcPosition=function(e){return new BABYLON.Vector3},this.changeDisplayMode=function(){for(const t in this.nodes){var e=this.calcPosition(t);this.nodes[t].position=e}for(const n in this.edges)this.edges[n].update()},this.showLabels=function(e){this.labelsVisible=e;for(const t in this.nodes)this.nodes[t].showLabel()},this.createStructureFromDef2=function(t){for(let e=0;e<t.length;e++)if(t[e].n1===t[e].n2){var n=t[e].n1;this.addNode(n,this.calcPosition(n),0);for(const l in t[e].values){var s=t[e].values[l];this.nodes[n].setValue(s,l)}this.nodes[n].displayValue("default"),this.nodes[n].showLabel(!1)}else{var i=t[e].n1,a=t[e].n2,o=(this.addEdge(i,a),i+","+a);a<i&&(o=a+","+i);for(const r in t[e].values)this.edges[o].setValue(t[e].values[r],r);this.edges[o].displayValue("default")}}},Chimera=function(){Graph.call(this),this.type="chimera",this.cols,this.rows,this.KL,this.KR,this.layers=1,this.maxNodeId=function(){return this.cols*this.rows*8},this.connect=function(e,t,n){e=e.toNodeId(this.rows,this.cols),t=t.toNodeId(this.rows,this.cols);e in this.nodes&&t in this.nodes&&this.addEdge(e,t,n)},this.connectRowModules2=function(n,s,i){for(let t=0;t<2;t++)for(let e=0;e<2;e++)this.connect(new QbDescr(n,s,i,1,t,e),new QbDescr(n,s+1,i,1,t,e),getRandom(-.5,.5))},this.connectColModules2=function(n,s,i){for(let t=0;t<2;t++)for(let e=0;e<2;e++)this.connect(new QbDescr(n,s,i,0,t,e),new QbDescr(n+1,s,i,0,t,e),getRandom(-.5,.5))},this.modulePosition=function(e,t,n){e=(this.cols-1)/2*50-50*e,t=50*t-(this.rows-1)/2*50,n=50*n-(this.layers-1)/2*50;return new BABYLON.Vector3(e,n,t)},this.calcPosition2=function(e,t,n,s){let i=this.modulePosition(e,t,n);return i.addInPlace(this.getNodeOffset2(s)),i},this.calcPosition=function(e){let t=QbDescr.fromNodeId(e,this.rows,this.cols);return this.calcPosition2(t.x,t.y,t.z,t.n0())},this.createModule2=function(t,n,s){var i=8*(t+(n+s*this.rows)*this.cols);for(let e=0;e<this.KL;e++)this.addNode(i+e+1,this.calcPosition2(t,n,s,e),NaN);for(let e=4;e<this.KR+4;e++)this.addNode(i+e+1,this.calcPosition2(t,n,s,e),NaN);for(let t=0;t<this.KL;t++)for(let e=0;e<this.KR;e++)this.addEdge(i+t+1,4+i+e+1,getRandom(-.5,.5))},this.getNodeOffset2=function(e){return{classic:[new BABYLON.Vector3(15,-3,-10),new BABYLON.Vector3(5,-1,-10),new BABYLON.Vector3(-5,1,-10),new BABYLON.Vector3(-15,3,-10),new BABYLON.Vector3(15,3,10),new BABYLON.Vector3(5,1,10),new BABYLON.Vector3(-5,-1,10),new BABYLON.Vector3(-15,-3,10)],diamond:[new BABYLON.Vector3(0,-3,9),new BABYLON.Vector3(0,-1,3),new BABYLON.Vector3(0,1,-3),new BABYLON.Vector3(0,3,-9),new BABYLON.Vector3(9,3,0),new BABYLON.Vector3(3,1,0),new BABYLON.Vector3(-3,-1,0),new BABYLON.Vector3(-9,-3,0)],triangle:[new BABYLON.Vector3(-15,-3,9),new BABYLON.Vector3(-15,-1,3),new BABYLON.Vector3(-15,1,-3),new BABYLON.Vector3(-15,3,-9),new BABYLON.Vector3(9,3,15),new BABYLON.Vector3(3,1,15),new BABYLON.Vector3(-3,-1,15),new BABYLON.Vector3(-9,-3,15)]}[sgv.displayMode][e]},this.createDefaultStructure=function(){for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols;e++)this.createModule2(e,t,n);for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows-1;t++)for(let e=0;e<this.cols;e++)this.connectRowModules2(e,t,n);for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols-1;e++)this.connectColModules2(e,t,n);this.showLabels(!0)},this.createStructureFromDef=function(t){for(let e=0;e<t.length;e++){var n,s;t[e].n1===t[e].n2?(n=t[e].n1,this.addNode(n,this.calcPosition(n),t[e].val),this.nodes[n].showLabel(!1)):(n=t[e].n1,s=t[e].n2,this.addEdge(n,s,t[e].val),this.edges[t[e].n1+","+t[e].n2].setValue(t[e].val,"default"))}},this.setSize=function(e,t,n,s,i){this.cols=e,this.rows=t,this.KL=n,this.KR=s,this.layers=void 0!==i?i:1}},Pegasus=(Chimera.prototype=Object.create(Chimera.prototype),(Chimera.prototype.constructor=Chimera).createNewGraph=function(e){var t=new Chimera;return t.setSize(e.cols,e.rows,e.KL,e.KR),t},function(){Chimera.call(this),this.type="pegasus",this.createDefaultStructure=function(){for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols;e++)this.createModule2(e,t,n);for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows-1;t++)for(let e=0;e<this.cols;e++)this.connectRowModules2(e,t,n);for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols-1;e++)this.connectColModules2(e,t,n);for(let n=0;n<this.layers;n++)for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols;e++)this.connectEvenMoreIdioticPegasusEdges(e,t,n);this.showLabels(!0)},this.connectEvenMoreIdioticPegasusEdges=function(s,i,a){for(let n=0;n<2;n++)for(let t=0;t<2;t++)for(let e=0;e<2;e++)a<this.layers-1?(this.connect(new QbDescr(s,i,a,0,0,n),new QbDescr(s,i,a+1,1,t,e),0),this.connect(new QbDescr(s,i,a,1,0,n),new QbDescr(s,i,a+1,0,t,e),0),0<s&&this.connect(new QbDescr(s,i,a,0,1,n),new QbDescr(s-1,i,a+1,1,t,e),0),0<i&&this.connect(new QbDescr(s,i,a,1,1,n),new QbDescr(s,i-1,a+1,0,t,e),0)):(s<this.cols-1&&i<this.rows-1&&(this.connect(new QbDescr(s,i,a,0,0,n),new QbDescr(s+1,i+1,0,1,t,e),0),this.connect(new QbDescr(s,i,a,1,0,n),new QbDescr(s+1,i+1,0,0,t,e),0)),i<this.rows-1&&this.connect(new QbDescr(s,i,a,0,1,n),new QbDescr(s,i+1,0,1,t,e),0),s<this.cols-1&&this.connect(new QbDescr(s,i,a,1,1,n),new QbDescr(s+1,i,0,0,t,e),0))},this.connectInternalPegasusEdges=function(e,t,n){let s=8*(e+(t+n*this.rows)*this.cols);1<this.KL&&(this.addEdge(s+1,s+2,getRandom(-.5,.5)),3<this.KL&&this.addEdge(s+3,s+4,getRandom(-.5,.5))),s+=4,1<this.KR&&(this.addEdge(s+1,s+2,getRandom(-.5,.5)),3<this.KR&&this.addEdge(s+3,s+4,getRandom(-.5,.5)))}}),UI=(Pegasus.prototype=Object.create(Pegasus.prototype),(Pegasus.prototype.constructor=Pegasus).createNewGraph=function(e){var t=new Pegasus;return void 0!==e.lays?t.setSize(e.cols,e.rows,e.KL,e.KR,e.lays):t.setSize(e.cols,e.rows,e.KL,e.KR),t},function(){this.consoleSwitch=UI.createConsoleSwitch(),this.consoleSwitch.addEventListener("click",function(){sgv.dlgConsole.switchConsole()}),this.dispModeSwitch=UI.createDispModeSwitch(),this.dispModeSwitch.addEventListener("click",function(){sgv.switchDisplayMode()})}),getRandom=(UI.tag=function(e,t,n){var s=document.createElement(e);for(const i in t)s.setAttribute(i,t[i]);for(const a in n)s[a]=n[a];return s},UI.span=function(e,t){return UI.tag("span",t,{textContent:e})},UI.selectByKey=function(e,t){t=UI.findOption(e,t.toString());return-1<t&&(e.selectedIndex=t,!0)},UI.clearSelect=function(e,t){for(var n=t?0:1;n<e.options.length;n++)e.removeChild(e.options[n]),n--},UI.findOption=function(e,t){for(var n=0;n<e.options.length;n++)if(e.options[n].value===t)return n;return-1},UI.option=function(e,t,n){var s=document.createElement("option");return s.value=e,s.text=t,void 0!==n&&(s.selected=n?"selected":""),s},UI.input=function(e){var t=document.createElement("input");for(const n in e)t.setAttribute(n,e[n]);return t},UI.newInput=function(e,t,n,s){var i=document.createElement("input");return i.setAttribute("type",e),i.value=t,void 0!==n&&""!==n&&i.setAttribute("class",n),void 0!==s&&""!==s&&i.setAttribute("id",s),i},UI.createTitlebar=function(e,t){var n=UI.tag("div",{class:"title"});return t&&n.appendChild(UI.tag("input",{type:"button",value:"x",class:"hidebutton"})),n.appendChild(UI.tag("span",{class:"titleText"},{textContent:e})),n},UI.createEmptyWindow=function(e,t,n,s){var i=document.createElement("div");void 0!==e&&""!==e&&i.setAttribute("class",e),void 0!==t&&""!==t&&i.setAttribute("id",t);let a=UI.createTitlebar(n,s);return i.offset={x:0,y:0},i.isDown=!1,a.addEventListener("mouseover",function(){a.style.cursor="pointer",movable=!0}),a.addEventListener("mouseout",function(){movable=!1}),a.addEventListener("mousedown",function(e){i.isDown=movable,i.offset={x:i.offsetLeft-e.clientX,y:i.offsetTop-e.clientY}},!0),a.addEventListener("mouseup",function(){i.isDown=!1},!0),document.addEventListener("mousemove",function(n){if(n.preventDefault(),i.isDown){let e=n.clientX,t=n.clientY;i.style.left=e+i.offset.x+"px",i.style.top=t+i.offset.y+"px"}},!0),i.appendChild(a),i},UI.createGraphs=function(e){e=UI.createEmptyWindow("sgvUIwindow",e,"graphs",!1);return e.innerHTML+='<div class="content"></div>',document.body.appendChild(e),e},UI.createPanelSwitch=function(){var e=UI.newInput("button","CPL","sgvTransparentButton","sgvPanelSwitch");return document.body.appendChild(e),e},UI.createConsoleSwitch=function(){var e=UI.newInput("button","CON","sgvTransparentButton","sgvConsoleSwitch");return document.body.appendChild(e),e},UI.createDispModeSwitch=function(){var e=UI.tag("input",{type:"button",value:"DIS",class:"sgvTransparentButton",id:"sgvDispModeSwitch"});return document.body.appendChild(e),e},UI.createTransparentBtn=function(e,t,n){let s=UI.tag("input",{type:"button",value:e,class:"sgvTransparentButton",id:t});return document.body.appendChild(s),"function"==typeof n&&s.addEventListener("click",function(){n()}),s},function(e,t){return e+Math.random()*(t-e)}),sgv="undefined"==typeof exports?function(){}:exports;function showSplash(){sgv.dlgLoaderSplash.show()}function hideSplash(){setTimeout(function(){sgv.dlgLoaderSplash.hide()},200)}function showSplashAndRun(e){showSplash(),setTimeout(()=>{e(),hideSplash()},100)}function download(e,t,n){let s=document.createElement("a");e=new Blob([e],{type:n});s.href=URL.createObjectURL(e),s.download=t,s.click()}"undefined"!=typeof global&&(global.sgv=sgv),sgv.version="0.1.0",sgv.engine=null,sgv.scene=null,sgv.camera=null,sgv.graf=null,sgv.displayMode="classic",sgv.createScene=function(){var e;sgv.scene=new BABYLON.Scene(sgv.engine),sgv.camera=new BABYLON.ArcRotateCamera("Camera",0,0,10,new BABYLON.Vector3(0,0,0),sgv.scene),sgv.camera.setPosition(new BABYLON.Vector3(166,150,0)),sgv.camera.attachControl(sgv.canvas,!0),sgv.camera.inputs.attached.pointers.panningSensibility=25,sgv.camera.upperBetaLimit=Math.PI/2*.99,sgv.camera.inertia=.5,(e=new BABYLON.SpotLight("Spot0",new BABYLON.Vector3(0,0,0),new BABYLON.Vector3(0,0,1),1.8,.01,sgv.scene)).intensity=.75,e.parent=sgv.camera,e.position=new BABYLON.Vector3(0,0,0),sgv.defaultSphere=BABYLON.MeshBuilder.CreateSphere("defaultSphere",{diameter:3,segments:8,updatable:!0},sgv.scene),sgv.defaultSphere.material=new BABYLON.StandardMaterial("mat",sgv.scene),sgv.defaultSphere.material.diffuseColor=new BABYLON.Color3(.4,.4,.4),sgv.defaultSphere.material.specularColor=new BABYLON.Color3(.4,.4,.4),sgv.defaultSphere.material.emissiveColor=new BABYLON.Color4(1,1,0),sgv.defaultSphere.setEnabled(!1),sgv.advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI"),sgv.nodeToConnect=0,sgv.addEventsListeners(),sgv.scene.clearColor=new BABYLON.Color3(.7,.7,.7)},sgv.switchDisplayMode=function(){"classic"===sgv.displayMode?sgv.displayMode="triangle":"triangle"===sgv.displayMode?sgv.displayMode="diamond":sgv.displayMode="classic",null!==sgv.graf&&sgv.graf.changeDisplayMode()},sgv.addEventsListeners=function(){var a,o,l=null;function r(){var e=sgv.scene.pick(sgv.scene.pointerX,sgv.scene.pointerY,function(e){return e===l});return e.hit?e.pickedPoint:null}function d(e){function t(e){var t,n,s;console.log("LEFT"),0!==sgv.nodeToConnect?(e.pickInfo.hit&&"node"===(t=e.pickInfo.pickedMesh.name.split(":"))[0]&&(s=sgv.nodeToConnect+","+parseInt(t[1],10),n=parseInt(t[1],10)+","+sgv.nodeToConnect,s in sgv.graf.edges||n in sgv.graf.edges?console.log("edge already exists"):sgv.graf.addEdge(sgv.nodeToConnect,parseInt(t[1],10),.5)),sgv.nodeToConnect=0):e.pickInfo.hit?(s=e.pickInfo.pickedMesh,console.log("mesh picked: "+s.name),"edge"===(s=s.name.split(":"))[0]?sgv.dlgEdgeProperties.show(s[1],sgv.scene.pointerX,sgv.scene.pointerY):"node"===s[0]?sgv.dlgNodeProperties.show(parseInt(s[1],10),sgv.scene.pointerX,sgv.scene.pointerY):(sgv.dlgEdgeProperties.hide(),sgv.dlgNodeProperties.hide())):(sgv.dlgEdgeProperties.hide(),sgv.dlgNodeProperties.hide())}switch(e.event.button){case 0:t(e);break;case 1:n=e,console.log("MIDDLE"),n.pickInfo.hit&&"node"===(n=n.pickInfo.pickedMesh.name.split(":"))[0]&&(0===sgv.nodeToConnect?sgv.nodeToConnect=parseInt(n[1],10):(s=sgv.nodeToConnect+","+parseInt(n[1],10),i=parseInt(n[1],10)+","+sgv.nodeToConnect,s in sgv.graf.edges||i in sgv.graf.edges?console.log("edge already exists"):sgv.graf.addEdge(sgv.nodeToConnect,parseInt(n[1],10),.5),sgv.nodeToConnect=0));break;case 2:console.log("RIGHT")}var n,s,i}sgv.scene.onPointerObservable.add(function(e){switch(e.type){case BABYLON.PointerEventTypes.POINTERTAP:d(e);break;case BABYLON.PointerEventTypes.POINTERDOUBLETAP:e.pickInfo.hit&&e.pickInfo.pickedMesh!==l&&"edge"===(i=(i=e.pickInfo.pickedMesh).name.split(":"))[0]&&sgv.graf.edgeDoubleClicked(i[1]);break;case BABYLON.PointerEventTypes.POINTERDOWN:e.pickInfo.hit&&e.pickInfo.pickedMesh!==l&&(i=e,console.log("POINTER.DOWN"),o=i.pickInfo.pickedMesh,(a=r())&&setTimeout(function(){sgv.camera.detachControl(sgv.canvas)},0)),null!==sgv.graf&&sgv.graf.showLabels(!1);break;case BABYLON.PointerEventTypes.POINTERUP:null!==sgv.graf&&sgv.graf.showLabels(!0),a&&(sgv.camera.attachControl(sgv.canvas,!0),a=null);break;case BABYLON.PointerEventTypes.POINTERMOVE:null!==sgv.graf&&a&&(t=r())&&(n=t.subtract(a),"node"===(s=o.name.split(":"))[0]&&(sgv.graf.moveNode(parseInt(s[1],10),n),a=t))}var t,n,s,i})},sgv.display=function(e){void 0!==e&&"object"==typeof e||(e={}),sgv.ui=new UI;let t=null;function n(){return new BABYLON.Engine(sgv.canvas,!0,{doNotHandleContextLost:!0,preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1})}null===(t="target"in e?document.getElementById(e.target):t)&&((t=document.createElement("div")).setAttribute("id","sgvWorkspaceArea"),document.body.appendChild(t)),sgv.canvas=document.createElement("canvas"),sgv.canvas.setAttribute("id","sgvRenderCanvas"),t.appendChild(sgv.canvas),sgv.advancedTexture=null,sgv.sceneToRender=null,window.initFunction=async function(){if(sgv.engine=await async function(){try{return n()}catch(e){return console.log("the available createEngine function failed. Creating the default engine instead"),n()}}(),!sgv.engine)throw"engine should not be null.";sgv.engine.enableOfflineSupport=!1,sgv.createScene()},initFunction().then(function(){sgv.sceneToRender=sgv.scene,sgv.engine.runRenderLoop(function(){sgv.sceneToRender&&sgv.sceneToRender.activeCamera&&sgv.sceneToRender.render()})}),window.addEventListener("resize",function(){sgv.engine.resize()}),desktopInit()},desktopInit=()=>{},parseGEXF=function(e){var a="unknown",o={cols:0,rows:0,KL:0,KR:0},l={},r={},d=[];if(parseNodes=function(e){let t=e.getElementsByTagName("nodes"),s=t[0].getElementsByTagName("node");for(let t=0;t<s.length;t++){let n={};var i=s[t].getAttribute("id");n.n1=n.n2=parseInt(i),n.values={};let e=s[t].getElementsByTagName("attvalues");if(0<e.length){let t=e[0].getElementsByTagName("attvalue");for(let e=0;e<t.length;e++){var a=t[e].getAttribute("value"),o=t[e].getAttribute("for"),o=l[o];n.values[o]=parseFloat(a)}}d.push(n)}},parseEdges=function(e){let t=e.getElementsByTagName("edges"),s=t[0].getElementsByTagName("edge");for(let t=0;t<s.length;t++){let n={};var i=s[t].getAttribute("source"),a=s[t].getAttribute("target");n.n1=parseInt(i),n.n2=parseInt(a),n.values={};let e=s[t].getElementsByTagName("attvalues");if(0<e.length){let t=e[0].getElementsByTagName("attvalue");for(let e=0;e<t.length;e++){var o=t[e].getAttribute("value"),l=t[e].getAttribute("for"),l=r[l];n.values[l]=parseFloat(o)}}d.push(n)}},parseNodeAttribute=function(e){var t,n=e.getAttribute("id");let s=e.getAttribute("title");return s.startsWith("default")?(e=s.split(";"),s=e[0],t=e[1],e=e[2],{id:n,title:s,type:t,size:e}):{id:n,title:s}},parseEdgeAttribute=function(e){return{id:e.getAttribute("id"),title:e.getAttribute("title")}},parseAttributes=function(e){let t=e.getElementsByTagName("attributes");for(let e=0;e<t.length;e++){var n,s=t[e].getAttribute("class"),i=t[e].getElementsByTagName("attribute");for(let t=0;t<i.length;t++)if("node"===s){let e=parseNodeAttribute(i[t]);l[e.id]=e.title,"type"in e&&(a=e.type),"size"in e&&(n=e.size.split(","),o.cols=parseInt(n[0]),o.rows=parseInt(n[1]),o.lays=parseInt(n[2]),o.KL=parseInt(n[3]),o.KR=parseInt(n[4]))}else"edge"===s&&(n=parseEdgeAttribute(i[t]),r[n.id]=n.title)}},window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml")):((xmlDoc=new ActiveXObject("Microsoft.XMLDOM")).async=!1,xmlDoc.loadXML(e)),parseAttributes(xmlDoc),parseNodes(xmlDoc),parseEdges(xmlDoc),"chimera"===a)sgv.graf=Chimera.createNewGraph(o);else{if("pegasus"!==a)return!1;sgv.graf=Pegasus.createNewGraph(o)}for(const t in l)sgv.graf.scopeOfValues.includes(l[t])||sgv.graf.scopeOfValues.push(l[t]);return sgv.graf.createStructureFromDef2(d),!0},sgv.stringToScope=(e,t)=>{sgv.graf.loadScopeValues(t,e).n&&sgv.dlgCPL.addScope(t),sgv.dlgCPL.selScope(t)},sgv.toGEXF=function(){download(sgv.graf.exportGEXF(),"graphDefinition.gexf","text/xml")},sgv.toTXT=function(){download(sgv.graf.exportTXT(),"graphDefinition.txt","text/plain")},sgv.fromTXT_BACK=function(e){for(var t,n,s=[],i=e.split("\n"),a={};0<i.length;)"#"!==i[0][0]?null!==(t=function(e){e=e.split(" ");return 3===e.length?{n1:parseInt(e[0],10),n2:parseInt(e[1],10),val:parseFloat(e[2],10)}:null}(i[0]))&&s.push(t):(t=i[0].split(" "),"type"===(n=(n=t[1]).split("="))[0]?a.type=n[1]:"size"===n[0]&&(n=n[1].split(","),a.size={cols:parseInt(n[0],10),rows:parseInt(n[1],10),KL:parseInt(n[2],10),KR:parseInt(n[3],10)})),i.shift();void 0===a.type?sgv.dlgCreateGraph.show("load",s):sgv.createGraph(a,s)},sgv.fromTXT=function(e){for(var t,n,s=[],i=e.split("\n"),a={};0<i.length;)"#"!==i[0][0]?null!==(t=function(e){e=e.split(" ");return 3===e.length?{n1:parseInt(e[0],10),n2:parseInt(e[1],10),val:parseFloat(e[2],10)}:null}(i[0]))&&s.push(t):(t=i[0].split(" "),"type"===(n=(n=t[1]).split("="))[0]?a.type=n[1]:"size"===n[0]&&(5<=(n=n[1].split(",")).length?a.size={cols:parseInt(n[0],10),rows:parseInt(n[1],10),lays:parseInt(n[2],10),KL:parseInt(n[3],10),KR:parseInt(n[4],10)}:4===n.length&&(a.size={cols:parseInt(n[0],10),rows:parseInt(n[1],10),lays:1,KL:parseInt(n[2],10),KR:parseInt(n[3],10)}))),i.shift();void 0===a.type?sgv.dlgCreateGraph.show("load",s):sgv.createGraph(a,s)},sgv.loadGraph=function(e){const t=e.name,n=new FileReader;e&&(n.addEventListener("error",()=>{console.error("Error occurred reading file: "+e.name)}),n.addEventListener("load",()=>{console.info(`File: ${e.name} read successfully`),t.endsWith("txt")?(null!==sgv.graf&&sgv.removeGraph(),sgv.fromTXT(n.result)):t.endsWith("gexf")?parseGEXF(n.result)&&sgv.setModeDescription():console.error("Incorrect file format...")}),t.endsWith("txt")||t.endsWith("gexf")?n.readAsText(e):console.error("Incorrect file extension..."))},sgv.loadGraph2=function(e,t){e.endsWith("txt")?(null!==sgv.graf&&sgv.removeGraph(),sgv.fromTXT(t)):e.endsWith("gexf")&&(null!==sgv.graf&&sgv.removeGraph(),parseGEXF(t)&&sgv.setModeDescription())},sgv.dlgCPL=new function(){var t,s,i,a,e=function(){let n=UI.tag("dialog",{class:"sgvUIwindow",id:"sgvDlgCPL"});s=function(){var e=UI.tag("div",{class:"content",id:"graphSelection"});return e.style.display="block",e.innerHTML+='<div><div><input class="" id="cplCreateButton" name="createButton" type="button" value="Create default"></div>                 <div>Read from .txt file: <input id="inputfile" type="file"></div>',e}(),i=function(){var e,t=UI.tag("div",{class:"content",id:"graphDescription"});t.appendChild(((e=UI.tag("div",{})).innerHTML="Current graph type: ",e.appendChild(UI.span("unknown",{id:"dscr_type"})),e.innerHTML+=', size: <span id="dscr_cols">0</span>x<span id="dscr_rows">0</span>xK<sub><span id="dscr_KL">0</span>,<span id="dscr_KR">0</span></sub><br/>                         Number of nodes: <span id="dscr_nbNodes">0</span>, number of edges: <span id="dscr_nbEdges">0</span>',e));let n=UI.tag("div",{class:"sgvD1",id:"cplDivNS"},{textContent:"add new scope: "}),s=(n.appendChild(UI.tag("input",{type:"button",class:"sgvC",id:"cplSkipAddScope",value:"<"})),n.appendChild(UI.tag("input",{type:"text",id:"cplAddScopeInput",value:"newScope"})),n.appendChild(UI.tag("input",{type:"button",class:"sgvC",id:"cplAcceptAddScope",value:"+"})),n.style.display="none",UI.tag("div",{class:"sgvD1",id:"cplDivDS"},{textContent:"current scope: "})),i=((a=UI.tag("select",{id:"cplDispValues"})).addEventListener("change",()=>{sgv.graf.displayValues(a.value)}),s.appendChild(a),s.appendChild(UI.tag("input",{type:"button",class:"sgvC",id:"cplAddScope",value:"+"})),s.appendChild(UI.tag("input",{type:"button",class:"sgvC",id:"cplDelScope",value:"-"})),UI.tag("div",{class:"sgvSelectBox",id:"cplScope"}));return i.appendChild(n),i.appendChild(s),t.appendChild(i),t.appendChild(UI.tag("input",{class:"actionbutton",id:"cplSaveButton",type:"button",value:"save to TXT"})),t.appendChild(UI.tag("input",{class:"actionbutton",id:"cplSaveGEXFButton",type:"button",value:"save to GEXF"})),t.appendChild(UI.tag("input",{class:"delbutton",id:"cplDeleteButton",type:"button",value:"clear workspace"})),t.style.display="none",t}(),(t=UI.tag("div",{})).style.display="block",t.appendChild(s),t.appendChild(i),n.appendChild(t),n.querySelector("#cplCreateButton").addEventListener("click",function(){sgv.dlgCreateGraph.show()}),n.querySelector("#cplDeleteButton").addEventListener("click",function(){sgv.removeGraph()}),n.querySelector("#cplSkipAddScope").addEventListener("click",function(){n.querySelector("#cplDivNS").style.display="none",n.querySelector("#cplDivDS").style.display="block"}),n.querySelector("#cplAcceptAddScope").addEventListener("click",function(){var e=n.querySelector("#cplAddScopeInput").value,t=sgv.graf.addScopeOfValues(e);0<=t&&(n.querySelector("#cplDispValues").add(UI.option(e,e)),n.querySelector("#cplDispValues").selectedIndex=t,sgv.graf.displayValues(e)),n.querySelector("#cplDivNS").style.display="none",n.querySelector("#cplDivDS").style.display="inline"}),n.querySelector("#cplAddScope").addEventListener("click",function(){n.querySelector("#cplDivNS").style.display="inline",n.querySelector("#cplDivDS").style.display="none"}),n.querySelector("#cplDelScope").addEventListener("click",function(){const e=n.querySelector("#cplDispValues");var t=sgv.graf.delScopeOfValues(e.value);0<=t&&(e.remove(e.selectedIndex),e.selectedIndex=t)}),n.querySelector("#cplSaveButton").addEventListener("click",function(){sgv.toTXT()}),n.querySelector("#cplSaveGEXFButton").addEventListener("click",function(){sgv.toGEXF()}),n.querySelector("#inputfile").addEventListener("change",function(){showSplashAndRun(()=>{sgv.loadGraph(this.files[0])})});var e=UI.tag("div",{id:"switch"});return e.addEventListener("click",()=>{o()}),e.innerHTML=". . .",n.appendChild(e),n.style.display="block",n}();function o(){t.style.display="none"===t.style.display?"block":"none"}return window.addEventListener("load",()=>{window.document.body.appendChild(e)}),{ui:function(){return e},show:function(){t.style.display="block"},hide:function(){t.style.display="none"},switchPanel:o,setModeDescription:function(){if(e.querySelector("#dscr_type").textContent=sgv.graf.type,e.querySelector("#dscr_cols").textContent=sgv.graf.cols,e.querySelector("#dscr_rows").textContent=sgv.graf.rows,e.querySelector("#dscr_KL").textContent=sgv.graf.KL,e.querySelector("#dscr_KR").textContent=sgv.graf.KR,e.querySelector("#dscr_nbNodes").textContent=Object.keys(sgv.graf.nodes).length,e.querySelector("#dscr_nbEdges").textContent=Object.keys(sgv.graf.edges).length,null!==sgv.graf){UI.clearSelect(a,!0);for(const n in sgv.graf.scopeOfValues){var t=sgv.graf.scopeOfValues[n];let e=UI.option(t,t);sgv.graf.currentScope===sgv.graf.scopeOfValues[n]&&(e.selected="selected"),a.appendChild(e)}}s.style.display="none",i.style.display="block"},setModeSelection:function(){s.style.display="block",i.style.display="none"},addScope:function(e,t){a.add(UI.option(e,e)),a.selectedIndex=t},delScope:function(e,t){-1<(e=UI.findOption(a,e))&&a.remove(e),a.selectedIndex=t},selScope:function(e){-1<(e=UI.findOption(a,e))&&(a.selectedIndex=e)}}},sgv.setModeSelection=sgv.dlgCPL.setModeSelection,sgv.setModeDescription=sgv.dlgCPL.setModeDescription,sgv.removeGraph=function(){null!==sgv.graf&&(sgv.graf.dispose(),sgv.graf=null),sgv.dlgMissingNodes.delAll(),sgv.setModeSelection()},sgv.createGraph=function(e,t){switch(null!==sgv.graf&&sgv.removeGraph(),e.type){case"chimera":sgv.graf=Chimera.createNewGraph(e.size);break;case"pegasus":sgv.graf=Pegasus.createNewGraph(e.size);break;default:return}void 0===t?sgv.graf.createDefaultStructure():sgv.graf.createStructureFromDef(t),sgv.setModeDescription()},sgv.dlgConsole=new function(){var s,i,n=[],a=-1,o=!1,l=function(e){e=UI.createEmptyWindow("sgvUIwindow",e,"console",!0);return e.innerHTML+='<div class="content">                 <textarea id="consoleHistory" readonly></textarea>                 <input type="text" id="commandline">             </div>',e}("sgvConsole");{let t=l.querySelector("#commandline"),e=(t.addEventListener("keydown",function(e){if("Enter"===e.key){let e=document.getElementById("consoleHistory");e.textContent+="> "+t.value+"\n",e.textContent+=function(e){function t(t){if(null===sgv.graf)return"no graph defined";let e=t.split("=");if(console.log(e),e.length<2)return"too few arguments";var t=parseFloat(e[1].replace(/,/g,".")),n=e[0].split("+");if(1===n.length){var s=n,i=t;if("q"!==s[0][0])return;{let t=parseInt(s[0].slice(1),10);if(isNaN(t)||0===t||t>sgv.graf.maxNodeId())return"bad node Id";if(isNaN(i))return t in sgv.graf.nodes?(sgv.graf.delNode(t.toString()),"deleted node q"+t):"node q"+t+" already deleted";if(t in sgv.graf.nodes)return sgv.graf.setNodeValue(t,i),"modified node q"+t+" = "+i;if(t in sgv.graf.missing){sgv.graf.restoreNode(t);let e=document.getElementById("rest"+t);return e.parentNode.removeChild(e),sgv.graf.setNodeValue(t,i),"restored and modified node q"+t+" = "+i}return sgv.graf.addNode(t,i),"added node q"+t+" = "+i}}if(2!==n.length)return"bad arguments";s=n,i=t;if("q"===s[0][0]&&"q"===s[1][0]){n=parseInt(s[0].slice(1),10),t=parseInt(s[1].slice(1),10);if(isNaN(n)||0===n)return"bad node Id: "+s[0];if(isNaN(t)||0===t)return"bad node Id: "+s[1];let e=t<n?t+","+n:n+","+t;return isNaN(i)?e in sgv.graf.edges?(sgv.graf.delEdge(e),"deleted edge "+e):"edge "+e+" not exists":e in sgv.graf.edges?(sgv.graf.setEdgeValue(e,i),"modified edge "+e):n in sgv.graf.nodes&&t in sgv.graf.nodes?(sgv.graf.addEdge(n,t,i),"added edge "+e):"NOT DONE: both connected nodes must exist in the graph"}}function n(e){switch(e){case"set":return"Set or remove value of node or edge\n\nset [nodeId](=value)\nset [nodeId]+[nodeId](=value)";case"create":return"Create new default graph\n\ncreate [chimera|pegasus] [4|8|12|16],[4|8|12|16],[1..4],[1..4]";case"clear":return"Remove current graph if exists\n\nclear";case"display":return"Switch between sets of displayed values\n\ndisplay [valueId]";case"displaymode":return"Set style of graph display.\n\ndisplaymode [classic|triangle|diamond]";default:return"For more information on a specific command, type: help command-name\n\nset\t\tSet or remove value of node or edge\ncreate\t\tCreate new default graph\nclear\t\tRemove current graph if exists\ndisplay\t\tSwitch between sets of displayed values\ndisplaymode\tSet style of graph display"}}var s=(e=e.trim().toLowerCase().replace(/\s+/g," ")).split(" ");var i=e.indexOf(" ");var a=e.substring(i+1).replace(/\s+/g,""),o="";switch(s[0].trim()){case"help":case"?":o=n(s[1]);break;case"limits":o=function(e){if(null===sgv.graf)return"no graph defined";let t="";if(1===e.length)return t="Current display limits [red, green] are set to ["+sgv.graf.redLimit+", "+sgv.graf.greenLimit+"]\n",n=sgv.graf.getMinMaxNodeVal(),t+="\nnode values range in current scope is: ["+n.min+", "+n.max+"] "+n.com,n=sgv.graf.getMinMaxEdgeVal(),t+="\nedge weights range in current scope is: ["+n.min+", "+n.max+"] "+n.com;if("set"!==e[1])return"bad arguments";if(e.length<4)return"too few arguments\nUse: limits set <min> <max>";var n=parseFloat(e[2].replace(/,/g,".")),e=parseFloat(e[3].replace(/,/g,"."));return isNaN(n)||isNaN(e)?"Bad arguments: <min> and <max> should be numbers.":0<n||e<0||n===e?"Bad arguments: <min> cannot be greater than zero, <max> cannot be less than zero and both values cannot be zero at the same time.":(sgv.graf.redLimit=n,sgv.graf.greenLimit=e,t="Display limits [red, green] are set to ["+sgv.graf.redLimit+", "+sgv.graf.greenLimit+"]",sgv.graf.displayValues(sgv.graf.currentScope),t)}(s);break;case"create":o=function(e,t){if(null!==sgv.graf)return"graf exists, type: clear <Enter> to delete it";switch(t=t.split(","),size={cols:parseInt(t[0],10),rows:parseInt(t[1],10),KL:parseInt(t[2],10),KR:parseInt(t[3],10)},e){case"chimera":sgv.graf=Chimera.createNewGraph(size),sgv.graf.createDefaultStructure();break;case"pegasus":sgv.graf=Pegasus.createNewGraph(size),sgv.graf.createDefaultStructure();break;default:return"unknown graph type"}return sgv.setModeDescription(),"graph created"}(s[1],s[2]);break;case"clear":sgv.removeGraph(),o="graph removed";break;case"set":o=t(a);break;case"scope":o=function(e,t){if(null===sgv.graf)return"no graph defined";switch(e){case"list":return sgv.graf.scopeOfValues.toString();case"add":var n=sgv.graf.addScopeOfValues(t);return 0<=n&&(sgv.dlgCPL.addScope(t,n),sgv.graf.displayValues(t)),"Added scope "+t;case"delete":n=sgv.graf.delScopeOfValues(t);return 0<=n?(sgv.dlgCPL.delScope(t,n),"Deleted scope "+t+", current scope: "+sgv.graf.currentScope):"Scope "+t+" could not to be deleted... Current scope: "+sgv.graf.currentScope;case"set":return sgv.graf.hasScope(t)?(sgv.graf.displayValues(t)&&sgv.dlgCPL.selScope(t),"Current scope: "+sgv.graf.currentScope):"Bad scope name: "+t+"... Current scope: "+sgv.graf.currentScope;default:return"Current scope: "+sgv.graf.currentScope}}(s[1],s[2]);break;case"display":o=function(e){return"displayed value: "+sgv.graf.displayValues(e)}(s[1]);break;case"displaymode":o="classic"===s[1]||"diamond"===s[1]||"triangle"===s[1]?(sgv.displayMode=s[1],sgv.graf.changeDisplayMode(),"current displayMode = "+s[1]):"unknown mode\n\n"+n("displaymode");break;default:o="unknown command\n\n"+n()}return o}(t.value)+"\n",e.scrollTop=e.scrollHeight,10<n.length&&n.shift(),n.push(t.value),a=n.length,t.value=""}else 38===e.keyCode?0<a&&(a--,t.value=n[a]):40===e.keyCode&&(a<n.length?(t.value=n[a],a++):t.value="")}),l.querySelector(".hidebutton").addEventListener("click",function(){sgv.dlgConsole.hideConsole()}),l.querySelector(".title"));e.addEventListener("mouseover",function(){l.querySelector(".title").style.cursor="pointer",o=!0}),e.addEventListener("mouseout",function(){o=!1}),e.addEventListener("mousedown",function(e){s=o,i={x:l.offsetLeft-e.clientX,y:l.offsetTop-e.clientY}},!0),e.addEventListener("mouseup",function(){s=!1},!0),document.addEventListener("mousemove",function(n){if(n.preventDefault(),s){let e=n.clientX,t=n.clientY;l.style.left=e+i.x+"px",l.style.top=t+i.y+"px"}},!0)}return window.addEventListener("load",()=>{window.document.body.appendChild(l)}),{switchConsole:function(){"block"!==l.style.display?l.style.display="block":l.style.display="none"},showConsole:function(){l.style.display="block"},hideConsole:function(){l.style.display="none"}}},sgv.dlgLoaderSplash=new function(){var e=null;return{show:function(){null===e&&((e=null===e?UI.tag("dialog",{class:"sgvModalDialog",id:"loaderSplash"}):e).innerHTML='<span>working hard for you</span><div class="loader"></div><span>... please wait ...</span>',e.style.display="none",window.document.body.appendChild(e)),e.open&&e.close(),e.style.display="block",e.showModal()},hide:function(){e.close(),e.style.display="none"}}},sgv.dlgCreateGraph=new function(){var i,a,n=function(){let e=UI.tag("dialog",{class:"sgvUIwindow sgvModalDialog",id:"sgvDlgCreateGraph"}),t=UI.createTitlebar("Create graph",!1),n=(e.appendChild(t),UI.tag("div",{class:"content",id:"graphSelection"})),s=(n.appendChild(UI.tag("div",{id:"description"})),UI.tag("div",{id:"description"}));s.style["text-align"]="center",(a=UI.tag("select",{id:"graphType"})).appendChild(UI.option("chimera","chimera")),a.appendChild(UI.option("pegasus","pegasus")),a.addEventListener("change",e=>{"chimera"===e.target.value?(i.selectedIndex=0,i.disabled="disabled"):i.disabled=""}),s.appendChild(UI.tag("label",{for:"graphType"},{innerHTML:"graph type: "})),s.appendChild(a),s.appendChild(UI.tag("hr")),(a=UI.tag("select",{id:"graphCols"})).appendChild(UI.option("4","4",!0)),a.appendChild(UI.option("8","8")),a.appendChild(UI.option("12","12")),a.appendChild(UI.option("16","16")),s.appendChild(UI.tag("label",{for:"graphCols"},{innerHTML:" columns: "})),s.appendChild(a),(a=UI.tag("select",{id:"graphRows"})).appendChild(UI.option("4","4",!0)),a.appendChild(UI.option("8","8")),a.appendChild(UI.option("12","12")),a.appendChild(UI.option("16","16")),s.appendChild(UI.tag("label",{for:"graphRows"},{innerHTML:" rows: "})),s.appendChild(a),(i=UI.tag("select",{id:"graphLays"})).appendChild(UI.option("1","1",!0));for(let e=2;e<10;e++)i.appendChild(UI.option(e,e));return i.disabled="disabled",s.appendChild(UI.tag("label",{for:"graphLays"},{innerHTML:" layers: "})),s.appendChild(i),s.appendChild(UI.tag("hr")),(a=UI.tag("select",{id:"graphKL"})).appendChild(UI.option("1","1")),a.appendChild(UI.option("2","2")),a.appendChild(UI.option("3","3")),a.appendChild(UI.option("4","4",!0)),s.appendChild(UI.tag("label",{for:"graphKL"},{innerHTML:"module size: K = "})),s.appendChild(a),(a=UI.tag("select",{id:"graphKR"})).appendChild(UI.option("1","1")),a.appendChild(UI.option("2","2")),a.appendChild(UI.option("3","3")),a.appendChild(UI.option("4","4",!0)),s.appendChild(UI.tag("label",{for:"graphKR"},{innerHTML:", "})),s.appendChild(a),n.appendChild(s),n.appendChild(UI.tag("div",{id:"buttons"})),e.appendChild(n),e.style.display="none",e}();function s(){n.close(),n.style.display="none"}return window.addEventListener("load",()=>{window.document.body.appendChild(n)}),{show:function(e,t){"load"===e?(n.querySelector("#buttons").innerHTML='<input class="actionbutton" id="cplCancelButton" name="cancelButton" type="button" value="Cancel">                  <input class="actionbutton" id="cplCreateButton" name="createButton" type="button" value="Load">',n.querySelector(".titleText").textContent="Load graph"):(n.querySelector("#buttons").innerHTML='<input class="actionbutton" id="cplCancelButton" name="cancelButton" type="button" value="Cancel">                  <input class="actionbutton" id="cplCreateButton" name="createButton" type="button" value="Create">',n.querySelector(".titleText").textContent="New graph"),n.style.display="block",n.querySelector("#cplCreateButton").addEventListener("click",()=>{showSplashAndRun(()=>{s(),setTimeout(()=>{sgv.createGraph({type:n.querySelector("#graphType").value,size:{cols:parseInt(n.querySelector("#graphCols").value,10),rows:parseInt(n.querySelector("#graphRows").value,10),lays:parseInt(n.querySelector("#graphLays").value,10),KL:parseInt(n.querySelector("#graphKL").value,10),KR:parseInt(n.querySelector("#graphKR").value,10)}},t)},100)})}),n.querySelector("#cplCancelButton").addEventListener("click",()=>{s()}),n.showModal()},hide:s}},sgv.dlgEdgeProperties=new function(){var a,o,l,r,d,c,u,p,t,g=function(){let e=UI.createEmptyWindow("sgvUIwindow","sgvEdgeProperties","Edge properties",!0);return e.querySelector(".hidebutton").addEventListener("click",function(){s()}),l=UI.newInput("hidden","0","","edgeId"),e.appendChild(l),t=UI.tag("div",{class:"content"}),(r=UI.tag("select",{id:"selectEdgeId"})).appendChild(UI.tag("option",{value:0,selected:!0},{innerHTML:"-- id --"})),r.addEventListener("change",function(){n(event.target.value)}),t.appendChild(UI.tag("label",{for:"selectEdgeId"},{innerHTML:"Edge: "})),t.appendChild(r),e.appendChild(t),a=UI.tag("div",{class:"content"}),e.appendChild(a),a.appendChild(UI.tag("label",{for:"nsSelectE"},{innerHTML:"Scope: "})),(d=UI.tag("select",{id:"nsSelectE"})).addEventListener("change",function(){var e,t;e=event.target.value,t=g.querySelector("#edgeId").value,null===(t=sgv.graf.edgeValue(t,sgv.graf.scopeOfValues[e]))||isNaN(t)?(console.log("NULL"),c.checked="",u.value=null,u.disabled="disabled",p.disabled="disabled"):(console.log("NOT NULL"),c.checked="checked",u.value=t,u.disabled="",p.disabled="")}),a.appendChild(d),a.appendChild(document.createElement("br")),(c=UI.newInput("checkbox","","","valueCheckE")).addEventListener("click",function(){var e=c.checked,t=sgv.graf.scopeOfValues[d.value];if(e){u.disabled="",p.disabled="";let e=parseFloat(u.value.replace(/,/g,"."));""===e&&(e=0,u.value=e),sgv.graf.setEdgeValue(g.querySelector("#edgeId").value,e,t)}else u.disabled="disabled",p.disabled="disabled",sgv.graf.delEdgeValue(g.querySelector("#edgeId").value,t)}),a.appendChild(c),u=UI.newInput("number","0","","wagaE"),a.appendChild(u),(p=UI.newInput("button","set","setvaluebutton","setE")).addEventListener("click",function(){var e,t,n;e=g.querySelector("#edgeId").value,t=parseFloat(u.value.replace(/,/g,".")),n=sgv.graf.scopeOfValues[d.value],sgv.graf.setEdgeValue(e,t,n),g.style.display="none"}),a.appendChild(p),(t=UI.newInput("button","delete","delbutton","")).addEventListener("click",function(){sgv.graf.delEdge(g.querySelector("#edgeId").value),g.style.display="none"}),a.appendChild(t),a.style["min-width"]="240px",a.style["min-height"]="105px",(o=UI.tag("div",{class:"content"})).innerHTML="Select an edge, please.",o.style["min-width"]="240px",o.style["min-height"]="105px",e.appendChild(o),e}();function n(e,t,n){if(void 0!==e?(e=e.toString(),l.value=e):e=l.value,"0"===e)return a.style.display="none",void(o.style.display="block");o.style.display="none",a.style.display="block",UI.clearSelect(r,!1);for(const s in sgv.graf.edges)r.appendChild(UI.tag("option",{value:s},{innerHTML:"q"+sgv.graf.edges[s].begin+" - q"+sgv.graf.edges[s].end}));UI.selectByKey(r,e),UI.clearSelect(d,!0);for(const i in sgv.graf.scopeOfValues){let e=UI.tag("option",{value:i},{innerHTML:sgv.graf.scopeOfValues[i]});sgv.graf.currentScope===sgv.graf.scopeOfValues[i]&&(e.selected="selected"),d.appendChild(e)}var e=sgv.graf.edgeValue(e);null===e?(c.checked="",u.value=null,u.disabled="disabled",p.disabled="disabled"):(c.checked="checked",u.value=e,u.disabled="",p.disabled=""),void 0!==t&&void 0!==n&&(e=sgv.canvas.clientLeft,g.style.top=n+"px",g.style.left=e+t+"px"),g.style.display="block"}function s(){null!==g&&(g.style.display="none")}return window.addEventListener("load",()=>{window.document.body.appendChild(g)}),{show:n,hide:s,isVisible:()=>null!==g&&"block"===g.style.display}},sgv.dlgNodeProperties=new function(){var r,d,c,u,n,p,g,h,v,f=function(){let e=UI.createEmptyWindow("sgvUIwindow","sgvNodeProperties","Node properties",!0);e.querySelector(".hidebutton").addEventListener("click",function(){i()}),r=UI.newInput("hidden","0","","nodeId"),e.appendChild(r);var t=UI.tag("div",{class:"content"}),t=((d=UI.tag("select",{id:"selectNodeId"})).appendChild(UI.tag("option",{value:0,selected:!0},{innerHTML:"-- id --"})),d.addEventListener("change",function(){s(event.target.value)}),t.appendChild(UI.tag("label",{for:"selectNodeId"},{innerHTML:"Node: "})),t.appendChild(d),e.appendChild(t),h=UI.tag("div",{class:"content"}),UI.tag("div"));return(p=UI.newInput("checkbox","","","checkLabelN")).addEventListener("click",function(e){e=e.target.checked;g.disabled=e?"":"disabled",sgv.graf.nodes[r.value].showLabel(e)}),t.appendChild(UI.tag("label",{for:"checkLabelN"},{innerHTML:"Label: "})),t.appendChild(p),(g=UI.newInput("text","","","editLabelN")).addEventListener("change",function(e){sgv.graf.nodes[r.value].setLabel(e.target.value,!0)}),t.appendChild(g),h.appendChild(t),(c=UI.tag("select",{id:"nsSelectN"})).addEventListener("change",function(){var e;console.log("changeScopeN: "+event.target.value),e=f.querySelector("#nodeId").value,null===(e=sgv.graf.nodeValue(e,sgv.graf.scopeOfValues[event.target.value]))||isNaN(e)?(console.log("NULL"),f.querySelector("#valueCheckN").checked="",f.querySelector("#wagaN").value=null,f.querySelector("#wagaN").disabled="disabled",f.querySelector("#setN").disabled="disabled"):(console.log("NOT NULL"),f.querySelector("#valueCheckN").checked="checked",f.querySelector("#wagaN").value=e,f.querySelector("#wagaN").disabled="",f.querySelector("#setN").disabled="")}),h.appendChild(UI.tag("label",{for:"nsSelectN"},{innerHTML:"Scope: "})),h.appendChild(c),h.appendChild(document.createElement("br")),(n=UI.newInput("checkbox","","","valueCheckN")).addEventListener("click",function(){var t=sgv.graf.scopeOfValues[f.querySelector("#nsSelectN").value];if(f.querySelector("#valueCheckN").checked){f.querySelector("#wagaN").disabled="",f.querySelector("#setN").disabled="";let e=parseFloat(f.querySelector("#wagaN").value.replace(/,/g,"."));""===e&&(e=0,f.querySelector("#wagaN").value=e),sgv.graf.setNodeValue(f.querySelector("#nodeId").value,e,t)}else f.querySelector("#wagaN").disabled="disabled",f.querySelector("#setN").disabled="disabled",sgv.graf.delNodeValue(f.querySelector("#nodeId").value,t)}),h.appendChild(n),n=UI.newInput("number","0","","wagaN"),h.appendChild(n),(n=UI.newInput("button","set","setvaluebutton","setN")).addEventListener("click",function(){var e,t,n;e=f.querySelector("#nodeId").value,t=parseFloat(f.querySelector("#wagaN").value.replace(/,/g,".")),n=sgv.graf.scopeOfValues[f.querySelector("#nsSelectN").value],sgv.graf.setNodeValue(e,t,n),f.style.display="none"}),h.appendChild(n),h.appendChild(document.createElement("br")),(n=UI.newInput("button","connect to...","","connectN")).addEventListener("click",function(){var e,t;e=f.querySelector("#nodeId").value,t=f.querySelector("#destN").value,null!==sgv.graf&&sgv.graf.addEdge(e,t)}),h.appendChild(n),u=UI.tag("select",{id:"destN"}),h.appendChild(u),(n=UI.newInput("button","^","","connectSelectN")).addEventListener("click",function(){sgv.nodeToConnect=parseInt(f.querySelector("#nodeId").value,10),f.style.display="none"}),h.appendChild(n),h.appendChild(document.createElement("br")),(btnDeleteNode=UI.newInput("button","delete","delbutton","")).addEventListener("click",function(){sgv.graf.delNode(r.value),f.style.display="none"}),h.appendChild(btnDeleteNode),h.style["min-width"]="240px",h.style["min-height"]="105px",e.appendChild(h),(v=UI.tag("div",{class:"content"})).innerHTML="Select a node, please.",v.style["min-width"]="240px",v.style["min-height"]="105px",e.appendChild(v),e}();function s(e,t,n){if(void 0!==e?(e=e.toString(),r.value=e):e=r.value,"0"===e)return h.style.display="none",void(v.style.display="block");v.style.display="none",h.style.display="block",r.value=e,g.value=sgv.graf.nodes[e].getLabel(),sgv.graf.nodes[e].isLabelVisible()?(p.checked="checked",g.disabled=""):(p.checked="",g.disabled="disabled"),UI.clearSelect(c,!0);for(const o in sgv.graf.scopeOfValues){var s=UI.tag("option",{value:o},{innerHTML:sgv.graf.scopeOfValues[o]});sgv.graf.currentScope===sgv.graf.scopeOfValues[o]&&(s.selected="selected"),c.appendChild(s)}var i=sgv.graf.nodeValue(e);null===i||isNaN(i)?(f.querySelector("#valueCheckN").checked="",f.querySelector("#wagaN").value=null,f.querySelector("#wagaN").disabled="disabled",f.querySelector("#setN").disabled="disabled"):(f.querySelector("#valueCheckN").checked="checked",f.querySelector("#wagaN").value=i,f.querySelector("#wagaN").disabled="",f.querySelector("#setN").disabled=""),UI.clearSelect(u,!0),UI.clearSelect(d,!1);for(const l in sgv.graf.nodes){var a=l.toString()!==e.toString();d.appendChild(UI.tag("option",{value:l},{innerHTML:"q"+l})),a&&u.appendChild(UI.tag("option",{value:l},{innerHTML:"q"+l}))}UI.selectByKey(d,e),void 0!==t&&void 0!==n&&(i=sgv.canvas.clientLeft,f.style.top=n+"px",f.style.left=i+t+"px"),f.style.display="block"}function i(){null!==f&&(f.style.display="none")}return window.addEventListener("load",()=>{window.document.body.appendChild(f)}),{show:s,hide:i,isVisible:()=>null!==f&&"block"===f.style.display}},sgv.dlgMissingNodes=new function(){var s,i=function(e){let t=UI.createEmptyWindow("sgvUIwindow",e,"removed nodes",!0);var e=UI.tag("div",{class:"content"}),n=(s=UI.tag("div",{id:"misN"}),e.appendChild(s),UI.newInput("button","clear history","delbutton",""));return n.addEventListener("click",function(){a()}),e.appendChild(n),t.appendChild(e),t}("sgvMissingNodes");function a(){s.innerHTML="",null!==sgv.graf&&(sgv.graf.missing={}),i.style.display="none"}return window.addEventListener("load",()=>{window.document.body.appendChild(i)}),{show:()=>{i.style.display="block"},hide:()=>{i.style.display="none"},addNode:function(n){let e=UI.newInput("button"," q"+n+" ","","rest"+n);e.addEventListener("click",function(){var e,t;e=n,(t=i.querySelector("#rest"+e)).parentNode.removeChild(t),sgv.graf.restoreNode(e)}),s.appendChild(e),i.style.display="block"},delAll:a}},sgv.dlgAbout=new function(){var s=null;function e(){null===s&&(s=UI.tag("dialog",{class:"sgvUIwindow sgvModalDialog",id:"sgvDlgAbout"}));var e=UI.tag("div",{class:"content"});e.style["text-align"]="center",e.style.width="fit-content",e.innerHTML+='<div><img src="pics/EuroHPC.jpg"></div>',e.innerHTML+="<div>Narodowa Infrastruktura Superkomputerowa dla EuroHPC - EuroHPC PL</div>",e.innerHTML+='<div class="info">simGraphVisualizer v.1.0</div>',e.innerHTML+='<div><img src="pics/Flagi.jpg"></div>';let t=UI.tag("input",{type:"button",value:"Close",class:"actionbutton",id:"closeButton",name:"closeButton"});e.appendChild(t),t.addEventListener("click",function(){i()});var n=UI.createTitlebar("About",!1);s.appendChild(n),s.appendChild(e),s.style.display="none",window.document.body.appendChild(s)}function i(){s.close(),s.style.display="none"}return{create:e,show:function(){null===s&&e(),s.style.display="block",s.showModal()},hide:i}};